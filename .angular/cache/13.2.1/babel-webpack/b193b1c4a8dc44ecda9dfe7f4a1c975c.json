{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\FAMILIA\\\\Documents\\\\MUCA\\\\filmes\\\\filmes\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\FAMILIA\\\\Documents\\\\MUCA\\\\filmes\\\\filmes\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { FormBuilder } from '@angular/forms';\nimport { SearchService } from '../service/search.service';\nimport { debounceTime } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../service/search.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\n\nvar _c0 = function _c0(a1) {\n  return [\"/details/\", a1];\n};\n\nfunction SearchComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵelementStart(1, \"ul\");\n    i0.ɵɵelementStart(2, \"li\", 8);\n    i0.ɵɵlistener(\"click\", function SearchComponent_div_6_Template_li_click_2_listener() {\n      i0.ɵɵrestoreView(_r4);\n      var ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.cleanArray();\n    });\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var list_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c0, list_r1.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(list_r1.original_title);\n  }\n}\n\nexport var SearchComponent = /*#__PURE__*/(function () {\n  var SearchComponent = /*#__PURE__*/function () {\n    function SearchComponent(formBuilder, service) {\n      _classCallCheck(this, SearchComponent);\n\n      this.formBuilder = formBuilder;\n      this.service = service;\n    }\n\n    _createClass(SearchComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.form = this.formBuilder.group({\n          search: [''],\n          list_search: this.formBuilder.array([])\n        });\n        this.form.get('search').valueChanges.pipe(debounceTime(100)).subscribe(function (item) {\n          _this.getSearch(item);\n        });\n      }\n    }, {\n      key: \"getSearch\",\n      value: function getSearch(search) {\n        var _this2 = this;\n\n        this.service.getSearch(search).subscribe(function (item) {\n          if (item && item.results.length) {\n            _this2.formArray(item);\n          } else {\n            _this2.cleanArray();\n          }\n        }, function (err) {\n          _this2.cleanArray();\n        });\n      }\n    }, {\n      key: \"formArray\",\n      value: function formArray(item) {\n        var _this3 = this;\n\n        var arr = this.form.controls.list_search;\n        arr.controls = [];\n        arr.removeAt(0);\n\n        if (item && item.results) {\n          item.results.map(function (i) {\n            arr.push(_this3.formBuilder.group({\n              id: [i.id],\n              original_title: [i.original_title]\n            }));\n          });\n          this.form.controls.list_search.patchValue(arr.value);\n        }\n      }\n    }, {\n      key: \"cleanArray\",\n      value: function cleanArray() {\n        var arr = this.form.controls.list_search;\n        arr.controls = [];\n        arr.removeAt(0);\n      }\n    }]);\n\n    return SearchComponent;\n  }();\n\n  SearchComponent.ɵfac = function SearchComponent_Factory(t) {\n    return new (t || SearchComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.SearchService));\n  };\n\n  SearchComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SearchComponent,\n    selectors: [[\"app-search\"]],\n    decls: 7,\n    vars: 2,\n    consts: [[1, \"container\"], [1, \"p-1\", \"rounded\", \"rounded-pill\", \"shadow-sm\", \"mb-4\", 3, \"formGroup\"], [1, \"input-group\"], [1, \"input-group-prepend\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-search\"], [\"type\", \"search\", \"placeholder\", \"Buscar por um Filme, S\\xE9rie ou Pessoa\", \"aria-describedby\", \"button-addon2\", \"formControlName\", \"search\", 1, \"form-control\", \"border-0\", \"bg-light\"], [\"class\", \"arrayMovies\", \"formArrayName\", \"list_search\", 4, \"ngFor\", \"ngForOf\"], [\"formArrayName\", \"list_search\", 1, \"arrayMovies\"], [3, \"routerLink\", \"click\"]],\n    template: function SearchComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelement(4, \"i\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, SearchComponent_div_6_Template, 5, 4, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.form.controls.list_search == null ? null : ctx.form.controls.list_search.value);\n      }\n    },\n    directives: [i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i3.NgForOf, i1.FormArrayName, i4.RouterLink],\n    styles: [\".card-img-top[_ngcontent-%COMP%]{width:80px;height:80px}.arrayMovies[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:10px}\"]\n  });\n  return SearchComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}